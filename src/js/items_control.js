
var BATTLE_ITEMS_MAPS = {
    "Held Bonuses": [["Deep Sea Scale","evo-item/deep-sea-scale"],["Deep Sea Tooth","evo-item/deep-sea-tooth"],["Dragon Scale","evo-item/dragon-scale"],["Razor Claw","evo-item/razor-claw"],["Razor Fang","evo-item/razor-fang"],["Absorb Bulb","hold-item/absorb-bulb"],["Adamant Orb","hold-item/adamant-orb"],["Adrenaline Orb","hold-item/adrenaline-orb"],["Air Balloon","hold-item/air-balloon"],["Assault Vest","hold-item/assault-vest"],["Big Root","hold-item/big-root"],["Binding Band","hold-item/binding-band"],["Black Belt","hold-item/black-belt"],["Black Glasses","hold-item/black-glasses"],["Black Sludge","hold-item/black-sludge"],["Blue Orb","hold-item/blue-orb"],["Blunder Policy","hold-item/blunder-policy"],["Bright Powder","hold-item/bright-powder"],["Burn Drive","hold-item/burn-drive"],["Cell Battery","hold-item/cell-battery"],["Charcoal","hold-item/charcoal"],["Chill Drive","hold-item/chill-drive"],["Choice Band","hold-item/choice-band"],["Choice Scarf","hold-item/choice-scarf"],["Choice Specs","hold-item/choice-specs"],["Damp Rock","hold-item/damp-rock"],["Destiny Knot","hold-item/destiny-knot"],["Douse Drive","hold-item/douse-drive"],["Dragon Fang","hold-item/dragon-fang"],["Eject Button","hold-item/eject-button"],["Eject Pack","hold-item/eject-pack"],["Electric Seed","hold-item/electric-seed"],["Eviolite","hold-item/eviolite"],["Expert Belt","hold-item/expert-belt"],["Flame Orb","hold-item/flame-orb"],["Float Stone","hold-item/float-stone"],["Focus Band","hold-item/focus-band"],["Focus Sash","hold-item/focus-sash"],["Grassy Seed","hold-item/grassy-seed"],["Grip Claw","hold-item/grip-claw"],["Griseous Orb","hold-item/griseous-orb"],["Hard Stone","hold-item/hard-stone"],["Heat Rock","hold-item/heat-rock"],["Icy Rock","hold-item/icy-rock"],["Iron Ball","hold-item/iron-ball"],["Lagging Tail","hold-item/lagging-tail"],["Leftovers","hold-item/leftovers"],["Life Orb","hold-item/life-orb"],["Light Ball","hold-item/light-ball"],["Light Clay","hold-item/light-clay"],["Lucky Punch","hold-item/lucky-punch"],["Luminous Moss","hold-item/luminous-moss"],["Lustrous Orb","hold-item/lustrous-orb"],["Magnet","hold-item/magnet"],["Mental Herb","hold-item/mental-herb"],["Metal Coat","hold-item/metal-coat"],["Metal Powder","hold-item/metal-powder"],["Metronome","hold-item/metronome"],["Miracle Seed","hold-item/miracle-seed"],["Misty Seed","hold-item/misty-seed"],["Muscle Band","hold-item/muscle-band"],["Mystic Water","hold-item/mystic-water"],["Poison Barb","hold-item/poison-barb"],["Power Herb","hold-item/power-herb"],["Protective Pads","hold-item/protective-pads"],["Psychic Seed","hold-item/psychic-seed"],["Quick Claw","hold-item/quick-claw"],["Quick Powder","hold-item/quick-powder"],["Red Card","hold-item/red-card"],["Red Orb","hold-item/red-orb"],["Ring Target","hold-item/ring-target"],["Rocky Helmet","hold-item/rocky-helmet"],["Room Service","hold-item/room-service"],["Rusted Shield","hold-item/rusted-shield"],["Rusted Sword","hold-item/rusted-sword"],["Safety Goggles","hold-item/safety-goggles"],["Scope Lens","hold-item/scope-lens"],["Sharp Beak","hold-item/sharp-beak"],["Shed Shell","hold-item/shed-shell"],["Shell Bell","hold-item/shell-bell"],["Shock Drive","hold-item/shock-drive"],["Silk Scarf","hold-item/silk-scarf"],["Silver Powder","hold-item/silver-powder"],["Smooth Rock","hold-item/smooth-rock"],["Snowball","hold-item/snowball"],["Soft Sand","hold-item/soft-sand"],["Soul Dew","hold-item/soul-dew"],["Spell Tag","hold-item/spell-tag"],["Stick","hold-item/stick"],["Sticky Barb","hold-item/sticky-barb"],["Terrain Extender","hold-item/terrain-extender"],["Thick Club","hold-item/thick-club"],["Throat Spray","hold-item/throat-spray"],["Toxic Orb","hold-item/toxic-orb"],["Twisted Spoon","hold-item/twisted-spoon"],["Utility Umbrella","hold-item/utility-umbrella"],["Weakness Policy","hold-item/weakness-policy"],["White Herb","hold-item/white-herb"],["Wide Lens","hold-item/wide-lens"],["Wise Glasses","hold-item/wise-glasses"],["Zoom Lens","hold-item/zoom-lens"],["Full Incense","incense/full"],["Lax Incense","incense/lax"],["Odd Incense","incense/odd"],["Rock Incense","incense/rock"],["Rose Incense","incense/rose"],["Sea Incense","incense/sea"],["Wave Incense","incense/wave"]],
    "Berries": [["Aguav Berry","berry/aguav"],["Apicot Berry","berry/apicot"],["Aspear Berry","berry/aspear"],["Babiri Berry","berry/babiri"],["Belue Berry","berry/belue"],["Bluk Berry","berry/bluk"],["Charti Berry","berry/charti"],["Cheri Berry","berry/cheri"],["Chesto Berry","berry/chesto"],["Chilan Berry","berry/chilan"],["Chople Berry","berry/chople"],["Coba Berry","berry/coba"],["Colbur Berry","berry/colbur"],["Cornn Berry","berry/cornn"],["Custap Berry","berry/custap"],["Durin Berry","berry/durin"],["Enigma Berry","berry/enigma"],["Figy Berry","berry/figy"],["Ganlon Berry","berry/ganlon"],["Grepa Berry","berry/grepa"],["Haban Berry","berry/haban"],["Hondew Berry","berry/hondew"],["Iapapa Berry","berry/iapapa"],["Jaboca Berry","berry/jaboca"],["Kasib Berry","berry/kasib"],["Kebia Berry","berry/kebia"],["Kee Berry","berry/kee"],["Kelpsy Berry","berry/kelpsy"],["Lansat Berry","berry/lansat"],["Leppa Berry","berry/leppa"],["Liechi Berry","berry/liechi"],["Lum Berry","berry/lum"],["Mago Berry","berry/mago"],["Magost Berry","berry/magost"],["Maranga Berry","berry/maranga"],["Micle Berry","berry/micle"],["Nanab Berry","berry/nanab"],["Nomel Berry","berry/nomel"],["Occa Berry","berry/occa"],["Oran Berry","berry/oran"],["Pamtre Berry","berry/pamtre"],["Passho Berry","berry/passho"],["Payapa Berry","berry/payapa"],["Pecha Berry","berry/pecha"],["Persim Berry","berry/persim"],["Petaya Berry","berry/petaya"],["Pinap Berry","berry/pinap"],["Pomeg Berry","berry/pomeg"],["Qualot Berry","berry/qualot"],["Rabuta Berry","berry/rabuta"],["Rawst Berry","berry/rawst"],["Razz Berry","berry/razz"],["Rindo Berry","berry/rindo"],["Roseli Berry","berry/roseli"],["Rowap Berry","berry/rowap"],["Salac Berry","berry/salac"],["Shuca Berry","berry/shuca"],["Sitrus Berry","berry/sitrus"],["Spelon Berry","berry/spelon"],["Starf Berry","berry/starf"],["Tamato Berry","berry/tamato"],["Tanga Berry","berry/tanga"],["Wacan Berry","berry/wacan"],["Watmel Berry","berry/watmel"],["Wepear Berry","berry/wepear"],["Wiki Berry","berry/wiki"],["Yache Berry","berry/yache"]],
    "Power Level": [["Macho Brace","ev-item/macho-brace"],["Power Anklet","ev-item/power-anklet"],["Power Band","ev-item/power-band"],["Power Belt","ev-item/power-belt"],["Power Bracer","ev-item/power-bracer"],["Power Lens","ev-item/power-lens"],["Power Weight","ev-item/power-weight"]],
    "Plates": [["Draco Plate","plate/draco"],["Dread Plate","plate/dread"],["Earth Plate","plate/earth"],["Fist Plate","plate/fist"],["Flame Plate","plate/flame"],["Icicle Plate","plate/icicle"],["Insect Plate","plate/insect"],["Iron Plate","plate/iron"],["Meadow Plate","plate/meadow"],["Mind Plate","plate/mind"],["Pixie Plate","plate/pixie"],["Sky Plate","plate/sky"],["Splash Plate","plate/splash"],["Spooky Plate","plate/spooky"],["Stone Plate","plate/stone"],["Toxic Plate","plate/toxic"],["Zap Plate","plate/zap"]],
    "Gems": [["Bug Gem","gem/bug"],["Dark Gem","gem/dark"],["Dragon Gem","gem/dragon"],["Electric Gem","gem/electric"],["Fairy Gem","gem/fairy"],["Fighting Gem","gem/fighting"],["Fire Gem","gem/fire"],["Flying Gem","gem/flying"],["Ghost Gem","gem/ghost"],["Grass Gem","gem/grass"],["Ground Gem","gem/ground"],["Ice Gem","gem/ice"],["Normal Gem","gem/normal"],["Poison Gem","gem/poison"],["Psychic Gem","gem/psychic"],["Rock Gem","gem/rock"],["Steel Gem","gem/steel"],["Water Gem","gem/water"]],
    "Mega-Stone": [["Abomasite","mega-stone/abomasite"],["Absolite","mega-stone/absolite"],["Aerodactylite","mega-stone/aerodactylite"],["Aggronite","mega-stone/aggronite"],["Alakazite","mega-stone/alakazite"],["Altarianite","mega-stone/altarianite"],["Ampharosite","mega-stone/ampharosite"],["Audinite","mega-stone/audinite"],["Banettite","mega-stone/banettite"],["Beedrillite","mega-stone/beedrillite"],["Blastoisinite","mega-stone/blastoisinite"],["Blazikenite","mega-stone/blazikenite"],["Cameruptite","mega-stone/cameruptite"],["Charizardite X","mega-stone/charizardite-x"],["Charizardite Y","mega-stone/charizardite-y"],["Diancite","mega-stone/diancite"],["Galladite","mega-stone/galladite"],["Garchompite","mega-stone/garchompite"],["Gardevoirite","mega-stone/gardevoirite"],["Gengarite","mega-stone/gengarite"],["Glalitite","mega-stone/glalitite"],["Gyaradosite","mega-stone/gyaradosite"],["Heracronite","mega-stone/heracronite"],["Houndoominite","mega-stone/houndoominite"],["Kangaskhanite","mega-stone/kangaskhanite"],["Latiasite","mega-stone/latiasite"],["Latiosite","mega-stone/latiosite"],["Lopunnite","mega-stone/lopunnite"],["Lucarionite","mega-stone/lucarionite"],["Manectite","mega-stone/manectite"],["Mawilite","mega-stone/mawilite"],["Medichamite","mega-stone/medichamite"],["Metagrossite","mega-stone/metagrossite"],["Mewtwonite X","mega-stone/mewtwonite-x"],["Mewtwonite Y","mega-stone/mewtwonite-y"],["Pidgeotite","mega-stone/pidgeotite"],["Pinsirite","mega-stone/pinsirite"],["Sablenite","mega-stone/sablenite"],["Salamencite","mega-stone/salamencite"],["Sceptilite","mega-stone/sceptilite"],["Scizorite","mega-stone/scizorite"],["Sharpedonite","mega-stone/sharpedonite"],["Slowbronite","mega-stone/slowbronite"],["Steelixite","mega-stone/steelixite"],["Swampertite","mega-stone/swampertite"],["Tyranitarite","mega-stone/tyranitarite"],["Venusaurite","mega-stone/venusaurite"]],
    "Z-item": [["Aloraichium Z","z-crystals/aloraichium-z--held"],["Buginium Z","z-crystals/buginium-z--held"],["Darkinium Z","z-crystals/darkinium-z--held"],["Decidium Z","z-crystals/decidium-z--held"],["Dragonium Z","z-crystals/dragonium-z--held"],["Eevium Z","z-crystals/eevium-z--held"],["Electrium Z","z-crystals/electrium-z--held"],["Fairium Z","z-crystals/fairium-z--held"],["Fightinium Z","z-crystals/fightinium-z--held"],["Firium Z","z-crystals/firium-z--held"],["Flyinium Z","z-crystals/flyinium-z--held"],["Ghostium Z","z-crystals/ghostium-z--held"],["Grassium Z","z-crystals/grassium-z--held"],["Groundium Z","z-crystals/groundium-z--held"],["Icium Z","z-crystals/icium-z--held"],["Incinium Z","z-crystals/incinium-z--held"],["Kommonium Z","z-crystals/kommonium-z--held"],["Lunalium Z","z-crystals/lunalium-z--held"],["Lycanium Z","z-crystals/lycanium-z--held"],["Marshadium Z","z-crystals/marshadium-z--held"],["Mewnium Z","z-crystals/mewnium-z--held"],["Mimikium Z","z-crystals/mimikium-z--held"],["Normalium Z","z-crystals/normalium-z--held"],["Pikanium Z","z-crystals/pikanium-z--held"],["Pikashunium Z","z-crystals/pikashunium-z--held"],["Poisonium Z","z-crystals/poisonium-z--held"],["Primarium Z","z-crystals/primarium-z--held"],["Psychium Z","z-crystals/psychium-z--held"],["Rockium Z","z-crystals/rockium-z--held"],["Snorlium Z","z-crystals/snorlium-z--held"],["Solganium Z","z-crystals/solganium-z--held"],["Steelium Z","z-crystals/steelium-z--held"],["Tapunium Z","z-crystals/tapunium-z--held"],["Ultranecrozium Z","z-crystals/ultranecrozium-z--held"],["Waterium Z","z-crystals/waterium-z--held"]],
    "Memories": [["Bug Memory","memory/bug"],["Dark Memory","memory/dark"],["Dragon Memory","memory/dragon"],["Electric Memory","memory/electric"],["Fairy Memory","memory/fairy"],["Fighting Memory","memory/fighting"],["Fire Memory","memory/fire"],["Flying Memory","memory/flying"],["Ghost Memory","memory/ghost"],["Grass Memory","memory/grass"],["Ground Memory","memory/ground"],["Ice Memory","memory/ice"],["Poison Memory","memory/poison"],["Psychic Memory","memory/psychic"],["Rock Memory","memory/rock"],["Steel Memory","memory/steel"],["Water Memory","memory/water"]]
}

function fragmentFromString(strHTML) {
    return document.createRange().createContextualFragment(strHTML);
}

function populateItemBox() {
    var itemBox = document.getElementById("item-box-body")
    var strFrag = ""
    for (var entry in BATTLE_ITEMS_MAPS){
        strFrag += '<legend>' + entry + '</legend>'
        strFrag+= '<img class="ic save-trigger" src="../img/none.png" data-id="">'
        BATTLE_ITEMS_MAPS[entry].forEach(function(value, key){
            if (items.includes(key)){
                strFrag += '<img class="ic save-trigger" src="https://raw.githubusercontent.com/msikma/pokesprite/master/items/' + value + '.png" loading="lazy" data-id="' + key + '">';
            }
        });
        strFrag += '<hr>'
    };
    itemBox.innerHTML = strFrag;
    $('.ic').click(selectItem);
    
}
function deserializeBattleItems() {
    for (var entry in BATTLE_ITEMS_MAPS){
        BATTLE_ITEMS_MAPS[entry] = new Map(BATTLE_ITEMS_MAPS[entry]);
    };
}
$(document).ready(function(){
    deserializeBattleItems()
    // load images asynchronously to not hinder the loading speed
    setTimeout(populateItemBox, 0);
});